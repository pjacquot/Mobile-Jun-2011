<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">

<head>
<title>Mobile Jun 2011 - Week 7 Assignment (Patrice Jacquot)</title>
</head>

<body>

<p>Mobile Jun 2011 - <strong>Week 7 Assignment</strong></p>

<p><strong>Student:</strong> pjacquot - Patrice Jacquot</p>

<h1>Assignment: Enhanced Progression</h1>

<p>For this assignment, I will create a web application. It must adapt to various contexts and at least use Web Storage, and work offline.</p>

<h2>Project's purpose</h2>

<p>Every monday evening, colleagues and myself go play badminton. As the organizer of these recurrent events, I have to take Google Spreadsheet</p>

<h2>Step 1: Static web pages</h2>

<p>At this step I created two static web pages, one for the list mode and the other for the edition mode.
In this version graphics are designed, using media queries and SVG sprites.
The JavaScript methods are basically implemented but without persistence nor server synchronization.
The session does not correspond to </p>

<p>At this time, the application is composed by the following files:</p>
<dl>
  <dt><a href="step1/list.html"><tt>list.html</tt></a></dt><dd>This is the list of badminton sessions</dd>
  <dt><a href="step1/session.html"><tt>session.html</tt></a></dt><dd>The details of a single session</dd>
  <dt><a href="step1/style-1.css"><tt>style-1.css</tt></a></dt><dd>Adaptative style definition (contains SVG files)</dd>
  <dt><a href="step1/logic-1.js"><tt>logic-1.js</tt></a></dt><dd>JavaScript code with the basic implementation</dd>
</dl>

<a href="step1/list.html">Application after step 1</a>

<h2>Step 2: Dynamically populate pages, hash-navigation and localStorage</h2>

<p>The two html pages <tt>list.html</tt> and <tt>session.html</tt> are merged into a single <tt>index.html</tt> file.</p>
<p>Thanks to the <tt>onhashchange</tt> event, we are able to detect URI changes while staying in the same webpage.
When we navigate to a badminton session, we simply append a hashtag to the URL, for example <tt>#2011-09-05</tt> for 5 September 2011</p>
<p>Because there is no remote database yet, the "Resync" button just clean the localStorage and stores two examples of badminton sessions.</p>
<p>On save, changes are stored into the locastorage and retained even if the browser is restarted.</p>

<a href="step2/">Application after step 2</a>

<h2>Step 3: CouchDB installation and tests</h2>

<p>CouchDB </p>

<p>To install and start CouchDB on my Debian 6.0, I have only to type this command:</p>
<pre>
apt-get install couchdb
</pre>

<p>Then, I added the following configuration directive in Nginx (as explained in <a href="http://wiki.apache.org/couchdb/Nginx_As_a_Reverse_Proxy">nginx as a Reverse Proxy</a>):</p>
<pre>
# CouchDB
location        ~ /cdb {
 rewrite        ^/cdb/(.*)$ /$1 break;
 proxy_pass     http://localhost:5984;
 proxy_redirect off;
 proxy_set_header Host $host;
 proxy_set_header X-Real-IP $remote_addr;
 proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
 proxy_set_header X-Forwarded-Ssl on;
}
</pre>
<p>Now, access to the CouchDB API is accessible from <a href="https://patj.eu/cdb/">https://patj.eu/cdb/</a></p>

<p>Using CouchDB manager, I created this database for the experiments of the first step: <a href="https://patj.eu/cdb/w3c-mobile-step1/"></a></p>

</body>

</html>
